<div class="sidebar-container" [class.collapsed]="isCollapsed">
  <div class="sidebar-header">
    <a routerLink="/dashboard/overview" class="sidebar-logo-link">
      <img
        *ngIf="!isCollapsed"
        src="assets/images/logo-fluxivamed-white.png"
        alt="FluxivaMed Logo"
        class="sidebar-logo"
      />
      <img
        *ngIf="isCollapsed"
        src="assets/images/fluxivamed-symbol.png"
        alt="FluxivaMed Symbol"
        class="sidebar-logo-symbol"
      />
    </a>
    <button class="toggle-button" (click)="toggleSidebar()">
      <i class="fas" [class.fa-bars]="!isCollapsed" [class.fa-angle-right]="isCollapsed"></i>
    </button>
  </div>

  <nav class="sidebar-nav">
    <ul>
      <li
        *ngIf="hasRole('ADMIN') || hasRole('HOSPITAL_ADMIN') || hasRole('ESCALISTA')"
        [attr.data-dropdown-name]="'gerenciamento'"
      >
        <div
          class="menu-item"
          (click)="toggleDropdown('gerenciamento', $event)"
          [class.active]="activeDropdown === 'gerenciamento'"
        >
          <a class="main-link">
            <i class="fas fa-tasks"></i>
            <span *ngIf="!isCollapsed">Gerenciamento</span>
            <i
              class="fas fa-angle-down dropdown-icon"
              [class.rotated]="activeDropdown === 'gerenciamento'"
              *ngIf="!isCollapsed"
            ></i>
          </a>
        </div>
        <ul
          #submenuRef
          class="submenu"
          [style.max-height]="activeDropdown === 'gerenciamento' && !isCollapsed ? 'auto' : '0px'"
        >
          <li>
            <a routerLink="/dashboard/gerenciamento/medicos" routerLinkActive="active">
              <i class="fas fa-user-md"></i>
              <span>Médicos</span>
            </a>
          </li>
          <li>
            <a routerLink="/dashboard/gerenciamento/hospitais" routerLinkActive="active">
              <i class="fas fa-hospital"></i>
              <span>Hospitais</span>
            </a>
          </li>
          <li>
            <a routerLink="/dashboard/gerenciamento/especialidades" routerLinkActive="active">
              <i class="fas fa-clinic-medical"></i>
              <span>Especialidades</span>
            </a>
          </li>
        </ul>
      </li>

      <li>
        <a routerLink="/dashboard/overview" routerLinkActive="active" class="menu-item">
          <i class="fas fa-th-large"></i>
          <span *ngIf="!isCollapsed">Visão Geral</span>
        </a>
      </li>

      <li *ngIf="hasRole('ADMIN') || hasRole('HOSPITAL_ADMIN') || hasRole('ESCALISTA')">
        <a routerLink="/dashboard/plantoes/criar" routerLinkActive="active" class="menu-item">
          <i class="fas fa-plus-circle"></i>
          <span *ngIf="!isCollapsed">Criar Plantão</span>
        </a>
      </li>

      <li *ngIf="hasRole('MEDICO')">
        <a routerLink="/dashboard/plantoes" routerLinkActive="active" class="menu-item">
          <i class="fas fa-calendar-alt"></i>
          <span *ngIf="!isCollapsed">Meus Plantões</span>
        </a>
      </li>
      <li *ngIf="hasRole('MEDICO')">
        <a routerLink="/dashboard/buscar-plantoes" routerLinkActive="active" class="menu-item">
          <i class="fas fa-search"></i>
          <span *ngIf="!isCollapsed">Buscar Plantões</span>
        </a>
      </li>
      <li *ngIf="hasRole('MEDICO')">
        <a routerLink="/dashboard/disponibilidade" routerLinkActive="active" class="menu-item">
          <i class="fas fa-calendar-check"></i>
          <span *ngIf="!isCollapsed">Disponibilidade</span>
        </a>
      </li>
      <li>
        <a routerLink="/dashboard/perfil" routerLinkActive="active" class="menu-item">
          <i class="fas fa-user-circle"></i>
          <span *ngIf="!isCollapsed">Meu Perfil</span>
        </a>
      </li>
    </ul>
  </nav>

  <div class="sidebar-footer">
    <a (click)="logout()" class="menu-item">
      <i class="fas fa-sign-out-alt"></i>
      <span *ngIf="!isCollapsed">Sair</span>
    </a>
  </div>
</div>
